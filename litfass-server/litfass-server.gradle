apply plugin: "kotlin"
apply plugin: "groovy"

dependencies {
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion"
    compile "io.ktor:ktor-server-netty:$ktorVersion"
    compile "io.ktor:ktor-server-core:$ktorVersion"
    compile "io.ktor:ktor-auth:$ktorVersion"
    compile "io.ktor:ktor-jackson:$ktorVersion"
    compile "io.ktor:ktor-metrics:$ktorVersion"
    compile "io.ktor:ktor-websockets:$ktorVersion"

    compile "ch.qos.logback:logback-classic:$logbackVersion"
    compile "org.elasticsearch.client:elasticsearch-rest-high-level-client:$elasticSearchVersion"

    testCompile "io.ktor:ktor-server-tests:$ktorVersion"
    testCompile "org.awaitility:awaitility:$awaitilityVersion"
    testCompile "org.awaitility:awaitility-kotlin:$awaitilityVersion"
}

compileKotlin {
    kotlinOptions.jvmTarget = JavaVersion.VERSION_1_8
}
compileTestKotlin {
    kotlinOptions.jvmTarget = JavaVersion.VERSION_1_8
}

jar {
    manifest {
        attributes "Main-Class": "lit.fass.litfass.server.AppKt"
    }
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}
