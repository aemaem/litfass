apply plugin: "kotlin"

dependencies {
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion"
    compile "io.ktor:ktor-server-netty:$ktorVersion"
    compile "io.ktor:ktor-server-core:$ktorVersion"
    compile "io.ktor:ktor-auth:$ktorVersion"
    compile "io.ktor:ktor-jackson:$ktorVersion"
    compile "io.ktor:ktor-metrics:$ktorVersion"
    compile "io.ktor:ktor-websockets:$ktorVersion"

    compile "ch.qos.logback:logback-classic:1.2.1"

    testCompile "io.ktor:ktor-server-tests:$ktorVersion"
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

jar {
    manifest {
        attributes "Main-Class": "lit.fass.litfass.server.AppKt"
    }
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}
